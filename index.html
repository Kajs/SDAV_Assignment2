<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Sdav assignment2 by Kajs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">

    <script type="text/javascript" src="d3.js"></script>
  </head>
  <body>
    <meta charset="UTF-8">
    <section class="page-header">
      <h1 class="project-name">Sdav assignment2</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/Kajs/SDAV_Assignment2" class="btn">View on GitHub</a>
      <a href="https://github.com/Kajs/SDAV_Assignment2/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Kajs/SDAV_Assignment2/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>Assignment 2A: Simple SVG stuff</h2>
        <svg>
          <rect x="0" y="20" width="80" height="80" fill="purple" fill-opacity="1.0" stroke="gray" stroke-width="2"/>
          <rect x="20" y="15" width="80" height="80" fill="blue" fill-opacity="0.8" stroke="gray" stroke-width="2"/>
          <rect x="40" y="10" width="80" height="80" fill="green" fill-opacity="0.6" stroke="gray" stroke-width="2"/>
          <rect x="60" y="5" width="80" height="80" fill="yellow" fill-opacity="0.4" stroke="gray" stroke-width="2"/>
          <rect x="80" y="0" width="80" height="80" fill="red" fill-opacity="0.2" stroke="gray" stroke-width="2"/>
        </svg>

      <h2>Assignment 2B: One scatter plot and two datasets</h2>
        <script type="text/javascript">
          var dataset; //Declare global var
          var crimeCounts2013 = [];
          var crimeCounts2015 = [];

          d3.csv("sfpd_cropped.csv", function(data) {
            dataset = data;

            data.forEach(function(d) {
              var found = false;
              var prostitution = 0;
              if(d.Category == "PROSTITUTION") { prostitution = 1; }
              var vehicleTheft = 0;
              if (d.Category == "VEHICLE THEFT") { vehicleTheft = 1; }
              
              if (d.Date == 2013) {
                for (i = 0; i < crimeCounts2013.length; i++) { 
                  var arr = crimeCounts2013[i];
                  if (d.PdDistrict == arr[0]) {
                    crimeCounts2013[i] = [arr[0], +arr[1] + prostitution, +[arr[2] + vehicleTheft]];
                    found = true;
                    break;
                  }
                }
                if (found == false) { crimeCounts2013.push( [d.PdDistrict, prostitution, vehicleTheft] ); }
              }

              if (d.Date == 2015) {
                for (i = 0; i < crimeCounts2015.length; i++) { 
                  var arr = crimeCounts2015[i];
                  if (d.PdDistrict == arr[0]) {
                    crimeCounts2015[i] = [arr[0], +arr[1] + prostitution, +[arr[2] + vehicleTheft]];
                    found = true;
                    break;
                  }
                }
                if (found == false) { crimeCounts2015.push( [d.PdDistrict, prostitution, vehicleTheft] ); }
              }
            });

            console.log("2013:");
            for (i = 0; i < crimeCounts2013.length; i++) { console.log(crimeCounts2013[i]);}
            console.log("\n");
            console.log("2015:");
            for (i = 0; i < crimeCounts2015.length; i++) { console.log(crimeCounts2015[i]); }
            console.log("\n");
          });

          var w = 500;
          var h = 100;
          var maxR = 50;

          var scaleRadius = d3.scale.linear();
          scaleRadius.domain([0, 2000]);
          scaleRadius.range([0, maxR]);

          var scaleWidth = d3.scale.linear();
          scaleWidth.domain([0, 2000]);
          scaleWidth.range([0, w]);

          var scaleHeight = d3.scale.linear();
          scaleHeight.domain([0, 2000]);
          scaleHeight.range([0, h]);


          var svg = d3.select("body").append(.png");
          svg.attr("width", w)
             .attr("height", h);

          var circles = svg.selectAll("circle")
            .data(crimeCounts2013)
            .enter()
            .append("circle");

          circles.attr("cx", function(d, i) {
              return scaleWidth( crimeCounts2013[i][1] );
            })
            .attr("cy", function(d, i) {
              return scaleHeight( crimeCounts2013[i][2] );
            })
            .attr("r", function(d, i) {
              return scaleRadius( crimeCounts2013[i][1] + crimeCounts[i][2] );
            });
        </script>
    </section>

  
  </body>
</html>
