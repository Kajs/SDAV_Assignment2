<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Sdav assignment2 by Kajs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">

    <script type="text/javascript" src="d3.js"></script>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Sdav assignment2</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/Kajs/SDAV_Assignment2" class="btn">View on GitHub</a>
      <a href="https://github.com/Kajs/SDAV_Assignment2/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Kajs/SDAV_Assignment2/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>Assignment 2A: Simple SVG stuff</h2>
        <svg>
          <rect x="0" y="20" width="80" height="80" fill="purple" fill-opacity="1.0" stroke="gray" stroke-width="2"/>
          <rect x="20" y="15" width="80" height="80" fill="blue" fill-opacity="0.8" stroke="gray" stroke-width="2"/>
          <rect x="40" y="10" width="80" height="80" fill="green" fill-opacity="0.6" stroke="gray" stroke-width="2"/>
          <rect x="60" y="5" width="80" height="80" fill="yellow" fill-opacity="0.4" stroke="gray" stroke-width="2"/>
          <rect x="80" y="0" width="80" height="80" fill="red" fill-opacity="0.2" stroke="gray" stroke-width="2"/>
        </svg>

      <h2>Assignment 2B: One scatter plot and two datasets</h2>
        <script type="text/javascript">
          var dataset; //Declare global var
          var year = "2013"
          var crimeCounts = []

          d3.csv("sfpd_mini.csv", function(data) {
            dataset = data;

            data.forEach(function(d) {
              console.log("top loop");
              if (d.date == year) {
                console.log("year match");
                var found = false;
                var prostitution = 0;
                if(d.category == "PROSTITUTION") { prostitution = 1; }
                var vehicleTheft = 0;
                if (d.category == "VEHICLE THEFT") { vehicleTheft = 1; }
              
                for (i = 0; i < crimeCounts.length; i++) { 
                  var arr = crimeCounts[i];
                  if (d.district == arr[0]) {
                    console.log("match");
                    crimecounts[i] = [arr[0], arr[1] + prostitution, [arr[2] + vehicleTheft]];
                    found = true;
                    break;
                  }
                }
                if (found == false) { console.log("mismatch"); crimeCounts.push( [d.district, prostitution, vehicleTheft] ); }
              }
              else { console.log("wrong year"); }
            });

            for (i = 0; i < crimeCounts.length; i++) { console.log(crimeCounts[i]); }
          });
        </script>
    </section>

  
  </body>
</html>
